<mat-toolbar *ngIf="authService.isLoggedIn$ | async" color="primary" class="navbar shadow-sm sticky-top">
  <div class="container d-flex align-items-center justify-content-between">

    <div class="brand d-flex align-items-center cursor-pointer" routerLink="/">
      <mat-icon class="me-2">policy</mat-icon>
      <span class="fw-bold">Seguros App</span>
    </div>

    <nav class="d-none d-md-flex gap-2">
      <ng-container *ngIf="authService.getStoredRol() === '1'">
        <button mat-button routerLink="/cliente" routerLinkActive="active-link">
          <mat-icon>group</mat-icon> Clientes
        </button>
        <button mat-button routerLink="/poliza" routerLinkActive="active-link">
          <mat-icon>assignment</mat-icon> Pólizas
        </button>
      </ng-container>

      <ng-container *ngIf="authService.getStoredRol() === '2'">
        <button mat-button routerLink="/poliza" routerLinkActive="active-link">
          <mat-icon>security</mat-icon> Mis Pólizas
        </button>
        <button mat-button routerLink="/cliente/form" routerLinkActive="active-link">
          <mat-icon>person_edit</mat-icon> Mi Perfil
        </button>
      </ng-container>
    </nav>

    <div class="d-flex align-items-center">
      <button mat-button [matMenuTriggerFor]="userMenu">
        <mat-icon>account_circle</mat-icon>
        <span class="ms-2 d-none d-sm-inline">
          {{ authService.getStoredRol() === '1' ? 'Administrador' : 'Cliente' }}
        </span>
      </button>

      <mat-menu #userMenu="matMenu">
        <button mat-menu-item (click)="onLogout()">
          <mat-icon color="warn">logout</mat-icon>
          <span>Cerrar Sesión</span>
        </button>
      </mat-menu>

      <div class="d-md-none">
        <button mat-icon-button [matMenuTriggerFor]="mainMenu">
          <mat-icon>menu</mat-icon>
        </button>
        <mat-menu #mainMenu="matMenu">
          <button mat-menu-item routerLink="/poliza">
            <mat-icon>assignment</mat-icon>
            <span>{{ authService.getStoredRol() === '1' ? 'Pólizas' : 'Mis Pólizas' }}</span>
          </button>

          <button mat-menu-item *ngIf="authService.getStoredRol() === '1'" routerLink="/cliente">
            <mat-icon>group</mat-icon> <span>Clientes</span>
          </button>

          <button mat-menu-item *ngIf="authService.getStoredRol() === '2'" routerLink="/cliente/form">
            <mat-icon>person</mat-icon> <span>Mi Perfil</span>
          </button>
        </mat-menu>
      </div>
    </div>

  </div>
</mat-toolbar>
